<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Doctor Appointment</title>
    <link rel="stylesheet" href="appointment.css">
</head>

<body>
    <h2>Doctor Appointment Form</h2>

    <form action="submit_appointment.php" method="post" id="appointmentForm">
        <label for="name">Patient Name:</label>
        <input type="text" id="name" name="name" required>
        <div class="nid_br">
            <p>enter nid or birth regi below</p>
            <label for="NID">NID No:</label>
            <input type="text" id="NID" name="NID" placeholder="Enter NID" onchange="checkFields()">

            <label for="birth_reg_no">Birth Reg No:</label>
            <input type="text" id="birth_reg_no" name="birth_reg_no" placeholder="Enter Birth Reg No"
                onchange="checkFields()">
        </div>


        <label for="age">Age:</label>
        <input type="number" id="age" name="age" >

        <label for="gender">Gender:</label>
        <select name="gender" id="gender">
            <option value="Male">Male</option>
            <option value="Female">Female</option>
            <option value="Other">Other</option>
        </select>

        <label for="doctor">Choose a Doctor:</label>
        <select name="doctor" id="doctor">
            <!-- Doctor options will be dynamically added here -->
        </select>

        <label for="appointment_date">Preferred Appointment Date:</label>
        <input type="date" id="appointment_date" name="appointment_date" required>

        <input type="submit" value="Ask for Appointment">
    </form>

    <script>
        // function checkFields() {
        //     // Ensure that only one of NID or Birth Reg No is filled
        //     if (document.getElementById("NID").value && document.getElementById("birth_reg_no").value) {
        //         alert("Please fill in either NID or Birth Reg No, not both.");
        //         return false;
        //     }
        // }

        // Fetch doctors from the server using PHP
        window.onload = function () {
            fetch('get_doctors.php')
                .then(response => response.json())
                .then(data => {
                    const doctorSelect = document.getElementById('doctor');
                    data.forEach(doctor => {
                        let option = document.createElement('option');
                        option.value = doctor.id;
                        option.textContent = doctor.name + " (" + doctor.speciality + ")";
                        doctorSelect.appendChild(option);
                    });
                });
        };
    </script>
</body>

</html>